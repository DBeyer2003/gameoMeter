{% extends 'newGameoMeter/base.html' %}
{% load static %}
{% load my_tags %}

{% block content %}
    <div class="search-content">

        {% for g in games %}
            <div class="search-grid">
                <div>
                    <a href="{% url 'game_details' g.pk %}">
                    {% if g.poster_link == None %}
                        <img class="link" src="{% static 'images/no-poster.jpg' %}" width="120px">
                    {% else %}
                        <img class="link" src="{{g.poster_link}}" width="120px">
                    {% endif %}
                    </a>
                </div>

                <div style="background-color:rgb(232, 177, 177); width:100%; padding:5px;border-radius: 5px;">
                    <p><a class="search-title" href="{% url 'game_details' g.pk %}">{{g.name}}</a></p>
                    <!--Displays score if available.-->
                    {% if g.fake_controlometer %} 
                        {% if g.fake_controlometer >= 60 %}
                            <img src="{% static 'images/fresh.png' %}" width="20px" height="20px">
                            <b>{{g.fake_controlometer}}%</b>
                        {% else %}
                            <img src="{% static 'images/rotten.png' %}" width="20px" height="20px">
                            <b>{{g.fake_controlometer}}%</b>

                        {% endif %}

                    {% else %}

                        No Critics Score.

                    {% endif %}

                    {% if g.game_scores != None %}

                        {% if g.game_scores.user_percent > 59.0 %}
                            <img src="{% static 'images/audience-yay.jpg' %}" width="20px" height="20px">
                        {% else %}
                            <img src="{% static 'images/audience-nay.jpg' %}" width="20px" height="20px">
                        {% endif %}
                        
                        <b>{{g.game_scores.user_percent}}%</b>,

                    {% endif %}<br>

                    ID: {{g.id_number}}<br>
                    PK: {{g.pk}}<br>
                    <p>{{g.publishers}}, {{g.developers}}, {{g.release_date}}</p>

                    



                </div>
            </div>
            <br>
        {% endfor %}

    </div>

    <!--Displays limited number of games per page.-->
    {% if is_paginated %}

    
    
    <div style="margin-top:10px; margin-bottom:10px; margin-left:25px;" class="page">
        <!--link to the game's previous page.-->
        {% if page_obj.has_previous %}
            <a style="font-family:cursive;" href="?{% param_replace page=1 %}">First</a>
            {% if page_obj.previous_page_number != 1 %}
                <a style="font-family:cursive;" href="?{% param_replace page=page_obj.previous_page_number %}">Previous</a>
            {% endif %}

        {% endif %}

        <span style="font-family:cursive;">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</span>

        <!--Link to the game's next page.-->
        {% if page_obj.has_next %}
            
            {% if page_obj.next_page_number != paginator.num_pages %}
                <a style="font-family:cursive;" href="?{% param_replace page=page_obj.next_page_number %}">Next</a>
            {% endif %}
            <a style="font-family:cursive;" href="?{% param_replace page=page_obj.paginator.num_pages %}">Last</a>
        {% endif %}
    </div>

    {% endif %}

{% endblock %}