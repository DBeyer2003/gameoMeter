{% extends 'newGameoMeter/base.html' %}
{% load static %}

{% block content %}

<img src="{{game.poster_link}}" width="120px"> <br>
    {{top_critics}}<br>
    {{game.name}}<br><br>

    <a href="{% url 'game_details' game.pk %}">Back to main page.</a>

    {% if game_reviews == None %}
        No reviews yet.<br>
    {% else %}

        <form action="{% url 'game_reviews' game.pk %}" method="get">

            All Reviews: <input type="radio" name="f-r" value="all"><br>

            <!--Option to filter between all critics and Top Critics.-->
            All Critics: <input type="radio" name="critic-type" value="all-critics"><br>
            Top Critics Only: <input type="radio" name="critic-type" value="only-tc"><br>
            <!--Filter fresh and rotten.-->
            Fresh Only: <input type="radio" name="f-r" value="fresh"><br>
            Rotten ONly: <input type="radio" name="f-r" value="rotten"><br> 

            Sort By Latest First: <input type="radio", name="date",value="latest"><br>
            Sort By Earliest First: <input type="radio", name="date",value="earliest"><br>

            

            {% if game.filtered_consoles != None %}
                <input type="checkbox" name="console", value="All"> All Systems<br>
                {% for console in game.filtered_consoles %}
                    <input type="checkbox" name="console", value="{{console}}"> {{console}}<br>
                {% endfor %}
            {% endif %}

            <!--Add a function to sort by dates here.-->
            <input type="fromSlider" id="date-range-low" name="date-range-low" min="0" max="100">
            <input type="toSlider" id="date-range-high" name="date-range-high" min="0" max="100">


            (BUTTON THAT FILTERS WITH WHATEVER CONSOLES THIS GAME IS ON)<br>

            <input class="reviews" type="submit"><br>
        </form>


        {% for review in game_reviews %}
            {{review.publication}}, {{review.author}}

            {% if review.date_published != "N/A" %}
                {{review.date_published}}
            {% endif %}
            
            <br>
            {{review.quote}}<br>

            {{review.platform}}<br>
            
            {% if review.fresh_rotten == True %}
                <img src="{% static 'images/fresh.png' %}" width="20px" height="20px">
            {% else %}
                <img src="{% static 'images/rotten.png' %}" width="20px" height="20px">
            {% endif %}

            <!--Links to review if available.-->
            {% if review.url_link %}
                {% if review.check_tomato == None %}
                    
                {% else %}
                     | <a href="{{review.url_link}}" target="_blank">Full Review</a>
                {% endif %}
            {% endif %}

            {% if review.display_score != "No Score" %}
                {{review.display_score}}
            {% endif %} <a style="text-align:right; font-size:10px" href="{% url 'update_review' review.pk %}">Change review info if needed.</a><br>
            
            <br>
            <br>
            
        {% endfor %}
    {% endif %}

{% endblock %}

<script src="{% static 'jsfunc.js' %}"></script>
{% block script %}{% endblock %}
